set background=dark
set backspace=indent,eol,start
set fileencodings=ucs-bom,utf-8,default,latin1
set helplang=en
set history=700
set undolevels=700
set nomodeline
set printoptions=paper:a4
set ruler
set suffixes=.bak,~,.swp,.o,.info,.aux,.log,.dvi,.bbl,.blg,.brf,.cb,.ind,.idx,.ilg,.inx,.out,.toc
set termencoding=utf-8
set window=25
" vim: set ft=vim :
set hlsearch
set nu " rnu
set ai
"set nobackup
"set noswapfile
let g:fuzzy_ignore = "*.png;*.PNG;*.JPG;*.jpg;*.GIF;*.gif;vendor/**;coverage/**;tmp/**;rdoc/**"
" set pastetoggle=<F2>
" set clipboard=unnamed
set smartcase
set ignorecase
set incsearch
let g:pymode_rope = 0
"set tabstop=4 softtabstop=4 shiftwidth=4
set noet ci pi sts=0 sw=4 ts=4 "Indent with tabs, align with spaces
" highlight Test ctermbg=black guibg=black
" match Test /\t/
" disable distributed ftplugins
let b:did_ftplugin=1
"filetype plugin on
" set omnifunc=pythoncomplete#Complete
nmap <Space> i_<Esc>r
map <F5> :syntax sync fromstart<CR>
map <F7> :tabp<CR>
map <F8> :tabn<CR>
map <Leader>pw ciw<C-r>0<Esc>
map <Leader>p' ci'<C-r>0<Esc>
map <Leader>p" ci"<C-r>0<Esc>
map <Leader>p( ci(<C-r>0<Esc>
map <Leader>p{ ci{<C-r>0<Esc>
map <Leader>p[ ci[<C-r>0<Esc>
map <Leader>pp "0p
map <Leader>op o<C-r>0<Esc>
map <Leader>nt :NERDTree %:h<CR>
nnoremap <buffer> <F9> :exec '!python' shellescape(@%, 1)<cr>
" map <C-s> :w<CR><Esc>
iab docid document.getElementById('')<Esc>hh
" set listchars=tab:▸\ ,eol:¬
set listchars=tab:\|\ 
set list
call pathogen#infect()
autocmd BufEnter *.aspx,*.html,*.js,*.py :syntax sync fromstart
set foldcolumn=1
set spelllang=en_gb
au VimEnter * RainbowParenthesesToggle
au Syntax * RainbowParenthesesLoadBraces
set cursorline
set laststatus=2
if version >= 700
  au InsertEnter * hi StatusLine ctermfg=15 ctermbg=0 guifg=white guibg=black
  au InsertLeave * hi StatusLine ctermfg=0 ctermbg=15 guifg=#455354 guibg=white
endif
"set statusline+=%#warningmsg#
"set statusline+=%{SyntasticStatuslineFlag()}
"set statusline+=%*
let g:syntastic_always_populate_loc_list = 1
let g:syntastic_auto_loc_list = 1
"let g:syntastic_check_on_open = 1
let g:syntastic_check_on_wq = 0
let g:syntastic_quiet_messages = { "regex": [
\	"Exactly one space",
\	"Final newline",
\	"Line too long",
\	"Too many",
\	"bad-whitespace",
\	"bare-except",
\	"broad-except",
\	"docstring",
\	"indentation with tabs",
\	"invalid-name",
\	"multiple-statements",
\	"parens after 'print'",
\	"redefined-outer-name"
\] }
"let g:syntastic_html_checkers = ['jshint']
let g:syntastic_python_checkers = ['pylint']
syntax on
set showcmd		" display incomplete commands
set wildmenu
set lazyredraw
inoremap jk <esc>
map <silent> <leader>cf :call writefile([], expand("<cfile>"), "t")<cr>
set scrolloff=5
" after search, scroll screen to centre
nnoremap n nzz
nnoremap N Nzz
nnoremap * *zz
nnoremap # #zz
nnoremap g* g*zz
nnoremap g# g#zz
" make paren highlighting more obvious
hi MatchParen cterm=bold ctermbg=darkgrey ctermfg=lightgrey
" make Y do y$ instead of yy
nnoremap Y y$
" keep multi-cursor after escape from insert
let g:multi_cursor_exit_from_insert_mode = 0
" allow timeout on 'j' when in insert mode
let g:multi_cursor_insert_maps={'j':1}
" look for tags file in parent directories (;)
set tags=./tags;
nnoremap <leader>j :lnext<cr>
nnoremap <leader>k :lprev<cr>
nnoremap <leader>l :cnext<cr>
nnoremap <leader>h :cprev<cr>
" working directory, r=repo a=ancestor
let g:ctrlp_working_path_mode = 'ra'
" gf enhancements
set suffixesadd+=.py
" find next line at current indentation
nnoremap <silent> <leader>, :call search('^'. matchstr(getline('.'), '\(^\s*\)') .'\%<' . line('.') . 'l\S', 'be')<CR>
nnoremap <silent> <leader>. :call search('^'. matchstr(getline('.'), '\(^\s*\)') .'\%>' . line('.') . 'l\S', 'e')<CR>
cnoremap %% <C-R>=expand('%:h').'/'<CR>
" see changes made before saving
if !exists(":DiffOrig")
  command DiffOrig vert new | set bt=nofile | r ++edit # | 0d_ | diffthis
		  \ | wincmd p | diffthis
endif
" invert word
function! InvertWord()
	if expand("<cfile>") ==# 'true'
		normal ciwfalse
	elseif expand("<cfile>") ==# 'false'
		normal ciwtrue
	elseif expand("<cfile>") ==# 'True'
		normal ciwFalse
	elseif expand("<cfile>") ==# 'False'
		normal ciwTrue
	elseif expand("<cfile>") ==# 'up'
		normal ciwdown
	elseif expand("<cfile>") ==# 'down'
		normal ciwup
	elseif expand("<cfile>") ==# 'left'
		normal ciwright
	elseif expand("<cfile>") ==# 'right'
		normal ciwleft
	elseif expand("<cfile>") ==# 'absolute'
		normal ciwrelative
	elseif expand("<cfile>") ==# 'relative'
		normal ciwabsolute
	elseif expand("<cfile>") ==# 'block'
		normal ciwhidden
	elseif expand("<cfile>") ==# 'hidden'
		normal ciwblock
	elseif expand("<cfile>") ==# 'class='
		normal ciwid
	elseif expand("<cfile>") ==# 'id='
		normal ciwclass
	else
		echo 'invert '.expand("<cfile>").'?'
	endif
endfunction
map <silent> <leader>s :call InvertWord()<cr>
" y & p goto "+
set clipboard=unnamed
set vb
" Show EOL type and last modified timestamp, right after the filename
set statusline=%<%F%h%m%r\ [%{&ff}]\ (%{strftime(\"%H:%M\ %d/%m/%Y\",getftime(expand(\"%:p\")))})%=%l,%c%V\ %P
" decode url
nnoremap <leader>u :s/%3a/:/g<cr>:s/%2f/\\/g<cr>:s/%2c/,/g<cr>
nnoremap <leader>ue :s/%3a/:/g<cr>:s/%2f/\\/g<cr>:s/%2c/,/g<cr>:s/&/\\&/g<cr>:s/?/\\?/g<cr>
